<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
      <title>Posts on Peter Aba </title>
    <link>http://localhost:1313/post/index.xml</link>
    <language>en-us</language>
    <author>Peter Aba</author>
    <rights>Copyright (c) 2013 - 2014, Peter Aba; all rights reserved.</rights>
    <updated>Tue, 27 Nov 2012 00:00:00 UTC</updated>
    
    <item>
      <title>Debugging CLI scripts with xDebug</title>
      <link>http://localhost:1313/post/debugging-cli-scripts-with-xdebug</link>
      <pubDate>Tue, 27 Nov 2012 00:00:00 UTC</pubDate>
      <author>Peter Aba</author>
      <guid>http://localhost:1313/post/debugging-cli-scripts-with-xdebug</guid>
      <description>&lt;p&gt;So you&amp;rsquo;ve set up your IDE to debug your webapp. Cool. It&amp;rsquo;s time to set it up for command line scripts too. No worries, it&amp;rsquo;s going to be a whole lot faster.&lt;/p&gt;

&lt;p&gt;export XDEBUG_CONFIG=&amp;ldquo;idekey=XDEBUG_PHPSTORM&amp;rdquo;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Jenkins for JavaScript I.</title>
      <link>http://localhost:1313/post/jenkins-for-javascript-i</link>
      <pubDate>Wed, 21 Nov 2012 00:00:00 UTC</pubDate>
      <author>Peter Aba</author>
      <guid>http://localhost:1313/post/jenkins-for-javascript-i</guid>
      <description>&lt;p&gt;I actually thought that setting up Jenkins to properly test a PHP based application is hard. Then I tried to do the same for JavaScript&amp;hellip; I&amp;rsquo;m currently half way there, but I think I already learnt enough to make up for a quick post.&lt;/p&gt;

&lt;p&gt;As an effort to make the code for this blog as clean and good as possible, I decided to set up Jenkins. It wasn&amp;rsquo;t a big deal until I made my mind up that the frontend part should also be tested there. That&amp;rsquo;s where all hell broke loose.&lt;/p&gt;

&lt;p&gt;In my previous post, I was actually mourning about the fact that setting up proper debugging is not that easy for PHP. It&amp;rsquo;s not too hard, but you definietly won&amp;rsquo;t get it out of the box. For CI, I could complain about that fact that you need to install and configure a handful of software to make the wonderful PHP template work. Still, it is very straight forward, no thinking is mandatory.&lt;/p&gt;

&lt;p&gt;Now for JavaScript, and especially frontend JavaScript, it&amp;rsquo;s a whole different story.&lt;/p&gt;

&lt;p&gt;Testing framework
For PHP we have phpUnit. It&amp;rsquo;s a defacto standard. It ships with a runner, assertion library, mocking framework, even some BDD support. Of course there are other tools out there - some of them are really good too -, but if you want to sell your product as tested, you&amp;rsquo;re going to mention phpUnit somewhere for sure.&lt;/p&gt;

&lt;p&gt;JavaScript however is just fragmented all the way. I&amp;rsquo;d dare to say QUnit is a defacto standard for frontend JavaScript, but no one would use it for Node.js&lt;/p&gt;

&lt;p&gt;Also, as JavaScript is just way cooler nowadays than PHP is, developers tend to prefer the cooler BDD to traditional TDD. For that, they have JasmineJs and Mocha, both promises to be usable for both frontend and backend JavaScript. I have quite a bit of background using QUnit and Jasmine, but not Mocha. I took a look at the project page of Mocha and it seemed promising and familiar at the same time, so I decided to use whichever framework I can get running on Jenkins easier.&lt;/p&gt;

&lt;p&gt;To make my life a bit harder on this matter, I happen to work on a headless virtual machine so anything that requires a real life browser is out of the question.&lt;/p&gt;

&lt;p&gt;Education
As I lacked the experience on the subject, I searched throughout the world wide web and my favorite frontend sources about setting up continuous integration for frontend. I found a lot of threads and comments about it, but hardly any tutorials. The only thing I could absorb was that I should setup JsTestDriver. That&amp;rsquo;s basicly a server that can be taught about the testing needs of your project and can run them in browser clients. You do need to connect the client to the server first. I gave it a try, but I found it rather tedious comparing to my cli based php testing tools.&lt;/p&gt;

&lt;p&gt;I need a headless browser
I found two promising candidates for running my tests and chose the seemingly more popular PhantomJs. (Just in case you wonder I since then learned that there are a bunch of other ones: &lt;a href=&#34;http://stackoverflow.com/a/814929&#34;&gt;http://stackoverflow.com/a/814929&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;The problem this time turned out to be that normally you fire up your headless browser just the same way as a regular one, meaning that there is no such option - as far as I know - as open some file in batch mode, than quit. Fortunately, there are projects just for that, but it didn&amp;rsquo;t seem to be available out of the box.&lt;/p&gt;

&lt;p&gt;So I actually first setup JsTestDriver with PhantomJs, using js-test-driver-phantomjs. Now I was finally able to run some tests, but was still far from satisfaction, as the default test library shipped with JsTestDriver does not appeal to me. Fortunately, there is some QUnit module and also a third party module for Mocha.&lt;/p&gt;

&lt;p&gt;These two I can&amp;rsquo;t yet comment on, as I found another working solution: mocha-phantomjs that caught my attention which so far I like it too. Although you should note that you need add assertion and mock libraries for mocha to really take adventage of it. Still, I need to figure out how to add code coverage to it.&lt;/p&gt;

&lt;p&gt;Conclusion?
There&amp;rsquo;s no real conclusion as of yet, but I can tell you that I have spent a lot of time even to get here. At the moment I&amp;rsquo;m happy about having test results, jshint and csslint results in my builds. Next up is code coverage which might make me change my current stack altogether. After that, I hope I&amp;rsquo;ll be able to evaluate how good these testing stacks really are.&lt;/p&gt;

&lt;p&gt;Side note
I found a really interesting - but not yet stable - project that promises to solve all these issues out of the box. It&amp;rsquo;s called Buster.Js. Unfortunately, it didn&amp;rsquo;t work for me and I haven&amp;rsquo;t been able to give them feedback about my issues. I&amp;rsquo;ll try to do that as this project could really change the frontend JavaScript world in my opinion.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Don&#39;t die</title>
      <link>http://localhost:1313/post/dont-die</link>
      <pubDate>Tue, 20 Nov 2012 00:00:00 UTC</pubDate>
      <author>Peter Aba</author>
      <guid>http://localhost:1313/post/dont-die</guid>
      <description>&lt;p&gt;Your unit tests are broken, you need to figure out what happened. You analyze the stack trace and open up the file you feel to be guilty of the error. You put some var_dump statement - maybe you&amp;rsquo;ll put it in some pre in there and then just die().&lt;/p&gt;

&lt;p&gt;It doesn&amp;rsquo;t help much, so you open up the next file and start again, maybe copy-paste your &amp;ldquo;debugger-statements&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;We have all been there, but please, don&amp;rsquo;t do it again!&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;m sure most PHP devs have some experience with real debuggers. Nowadays not only C and Java, but most JavaScript developers would instantly quite their jobs if they had no quality IDE/browser support for debugging. Even most PHP guys will have xDebug installed, because it adds a much nicer stack trace. Still, most of them will not worry about setting it up properly.&lt;/p&gt;

&lt;p&gt;Don&amp;rsquo;t get me wrong, I&amp;rsquo;ve been there, done that. Even a few weeks ago, since I work in a somewhat new environment. (vm, phpStorm) Still, it really isn&amp;rsquo;t that big of a hassle to set up, even if your stack is a bit more complicated. Here are my settings for running php on a virtual machine and phpStorm on the host with port 9999 instead of the default 9000.&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s what you should end up with:&lt;/p&gt;

&lt;p&gt;PhpStorm xDebug in action&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s my xdebug.ini:&lt;/p&gt;

&lt;p&gt;zend_extension = /opt/php54/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so&lt;/p&gt;

&lt;p&gt;;&lt;a href=&#34;http://xdebug.org/docs/all_settings&#34;&gt;http://xdebug.org/docs/all_settings&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;xdebug.remote_enable=1
;host: 10.10.4.1 - vm: 10.10.4.15
xdebug.remote_host=10.10.4.1
;you might want to keep the default 9000
xdebug.remote_port=9999
xdebug.remote_handler=dbgp
xdebug.remote_mode=req&lt;/p&gt;

&lt;p&gt;xdebug.var_display_max_depth = 5
xdebug.collect_params=On
xdebug.show_local_vars=On
xdebug.remote_log=/var/log/xdebug.log
;remote connect also works, but stay at the safe side first
;xdebug.remote_connect_back=1&lt;/p&gt;

&lt;p&gt;You should make sure you&amp;rsquo;re server is set up correctly.&lt;/p&gt;

&lt;p&gt;Server settings&lt;/p&gt;

&lt;p&gt;You only need to worry about the xdebug port here, it defaults to 9000.&lt;/p&gt;

&lt;p&gt;Debug settings&lt;/p&gt;

&lt;p&gt;I think the IDE key is not important here, but it doesn&amp;rsquo;t hurt any, so just set it as suggested.&lt;/p&gt;

&lt;p&gt;Dbgp settings&lt;/p&gt;

&lt;p&gt;Finally, my run/debug options:&lt;/p&gt;

&lt;p&gt;Dbgp settings&lt;/p&gt;

&lt;p&gt;I might eventually write a longer piece with a few IDE options, but I think this should also give you an idea, how to set it up in your environment.&lt;/p&gt;

&lt;p&gt;Happy debugging everyone!&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
